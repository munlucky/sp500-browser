<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>S&P 500 ë¸Œë¼ìš°ì € ìŠ¤ìºë„ˆ</title>
    
    <!-- PWA ì„¤ì • (HTTP/HTTPSì—ì„œë§Œ ë™ì‘) -->
    <meta name="theme-color" content="#2563eb">
    <meta name="description" content="ì‹¤ì‹œê°„ S&P 500 ë³€ë™ì„± ëŒíŒŒ ì¢…ëª© ì¶”ì²œ ì„œë¹„ìŠ¤">
    <meta name="keywords" content="S&P 500, ì£¼ì‹, ìŠ¤ìºë„ˆ, ë³€ë™ì„±, ëŒíŒŒ, íˆ¬ì">
    <meta name="author" content="S&P 500 Scanner">
    
    <!-- Open Graph -->
    <meta property="og:title" content="S&P 500 ë¸Œë¼ìš°ì € ìŠ¤ìºë„ˆ">
    <meta property="og:description" content="ì‹¤ì‹œê°„ S&P 500 ë³€ë™ì„± ëŒíŒŒ ì¢…ëª© ì¶”ì²œ ì„œë¹„ìŠ¤">
    <meta property="og:type" content="website">
    <meta property="og:url" content="">
    <meta property="og:image" content="icons/icon-512.png">
    
    <!-- ì•„ì´ì½˜ -->
    <link rel="apple-touch-icon" href="icons/icon-192.png">
    <link rel="icon" type="image/png" sizes="192x192" href="icons/icon-192.png">
    <link rel="icon" type="image/png" sizes="512x512" href="icons/icon-512.png">
    
    <!-- ë™ì  manifest ë¡œë“œ -->
    <script>
        // HTTP/HTTPS í™˜ê²½ì—ì„œë§Œ manifest ë¡œë“œ
        if (location.protocol !== 'file:') {
            const manifestLink = document.createElement('link');
            manifestLink.rel = 'manifest';
            manifestLink.href = 'manifest.json';
            document.head.appendChild(manifestLink);
        }
    </script>
    
    <!-- CSS -->
    <link rel="stylesheet" href="css/style.css">
    
    <!-- Preconnect to external domains -->
    <link rel="preconnect" href="https://www.alphavantage.co">
    <link rel="preconnect" href="https://finance.yahoo.com">
    
    <!-- ì¶”ê°€ Viewport Meta -->
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no, maximum-scale=1">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
</head>
<body>
    <div class="app">
        <!-- í—¤ë” -->
        <header class="header">
            <h1>ğŸ“ˆ S&P 500 ìŠ¤ìºë„ˆ</h1>
            <div class="controls">
                <button id="scanBtn" class="scan-btn" title="Ctrl+Enterë¡œ ì‹¤í–‰ ê°€ëŠ¥">ğŸ” ìŠ¤ìº” ì‹œì‘</button>
                <button id="notificationBtn" class="notification-btn" title="ë¸Œë¼ìš°ì € ì•Œë¦¼ ì„¤ì •">ğŸ”” ì•Œë¦¼ ì„¤ì •</button>
                <div class="status" id="status">ì¤€ë¹„ë¨</div>
            </div>
        </header>

        <!-- ìš”ì•½ ëŒ€ì‹œë³´ë“œ -->
        <section class="dashboard">
            <div class="stat-card" title="ì¡°ê±´ì„ ë§Œì¡±í•˜ê³  ëŒíŒŒí•œ ì¢…ëª© ìˆ˜">
                <div class="stat-number" id="breakoutCount">0</div>
                <div class="stat-label">ì‹¤ì‹œê°„ ëŒíŒŒ</div>
            </div>
            <div class="stat-card" title="ì¡°ê±´ì„ ë§Œì¡±í•˜ê³  ëŒíŒŒë¥¼ ê¸°ë‹¤ë¦¬ëŠ” ì¢…ëª© ìˆ˜">
                <div class="stat-number" id="waitingCount">0</div>
                <div class="stat-label">ëŒíŒŒ ëŒ€ê¸°</div>
            </div>
            <div class="stat-card" title="ë§ˆì§€ë§‰ ìŠ¤ìº”ì—ì„œ ë¶„ì„í•œ ì´ ì¢…ëª© ìˆ˜">
                <div class="stat-number" id="totalScanned">0</div>
                <div class="stat-label">ì´ ìŠ¤ìº”</div>
            </div>
            <div class="stat-card" title="ë§ˆì§€ë§‰ ìŠ¤ìº” ì™„ë£Œ ì‹œê°„">
                <div class="stat-number" id="lastUpdate">Never</div>
                <div class="stat-label">ë§ˆì§€ë§‰ ì—…ë°ì´íŠ¸</div>
            </div>
        </section>

        <!-- ì‹¤ì‹œê°„ ëŒíŒŒ ì¢…ëª© -->
        <section class="results-section">
            <h2>ğŸš€ ì‹¤ì‹œê°„ ëŒíŒŒ ì¢…ëª©</h2>
            <div id="breakoutStocks" class="stock-grid">
                <div class="no-results">ìŠ¤ìº”ì„ ì‹œì‘í•˜ì—¬ ëŒíŒŒ ì¢…ëª©ì„ ì°¾ì•„ë³´ì„¸ìš”!</div>
            </div>
        </section>

        <!-- ëŒíŒŒ ëŒ€ê¸° ì¢…ëª© -->
        <section class="results-section">
            <h2>â° ëŒíŒŒ ëŒ€ê¸° ì¢…ëª©</h2>
            <div id="waitingStocks" class="stock-grid">
                <div class="no-results">ìŠ¤ìº”ì„ ì‹œì‘í•˜ì—¬ ëŒ€ê¸° ì¢…ëª©ì„ ì°¾ì•„ë³´ì„¸ìš”!</div>
            </div>
        </section>

        <!-- ì„¤ì • íŒ¨ë„ -->
        <section class="settings-section">
            <h2>âš™ï¸ ì„¤ì •</h2>
            <div class="settings-grid">
                <div class="setting-item">
                    <label for="volatilityRange">ë³€ë™ì„± ë²”ìœ„:</label>
                    <input type="range" id="volatilityRange" min="2" max="10" value="6" step="0.5" 
                           title="ìµœëŒ€ ë³€ë™ì„± í•œê³„ ì„¤ì • (ìµœì†Œê°’ì€ í•­ìƒ 2%)">
                    <span id="volatilityValue">2-6%</span>
                </div>
                <div class="setting-item">
                    <label for="minVolume">ìµœì†Œ ê±°ë˜ëŸ‰:</label>
                    <select id="minVolume" title="ì¢…ëª© í•„í„°ë§ì„ ìœ„í•œ ìµœì†Œ ê±°ë˜ëŸ‰">
                        <option value="500000">50ë§Œì£¼</option>
                        <option value="1000000" selected>100ë§Œì£¼</option>
                        <option value="2000000">200ë§Œì£¼</option>
                        <option value="5000000">500ë§Œì£¼</option>
                    </select>
                </div>
                <div class="setting-item">
                    <label for="autoScan">ìë™ ìŠ¤ìº”:</label>
                    <div>
                        <input type="checkbox" id="autoScan" title="5ë¶„ë§ˆë‹¤ ìë™ìœ¼ë¡œ ìŠ¤ìº” ì‹¤í–‰">
                        <span>5ë¶„ë§ˆë‹¤ ìë™ ì‹¤í–‰</span>
                    </div>
                </div>
                <div class="setting-item">
                    <label>ìŠ¤ìº” ëª¨ë“œ:</label>
                    <div>
                        <input type="checkbox" id="demoMode" checked title="ë°ëª¨ ë°ì´í„° ì‚¬ìš© (ì‹¤ì œ API í‚¤ ì—†ì´ í…ŒìŠ¤íŠ¸)">
                        <span>ë°ëª¨ ëª¨ë“œ (í…ŒìŠ¤íŠ¸ìš©)</span>
                    </div>
                </div>
            </div>
        </section>

        <!-- ë„ì›€ë§ ì„¹ì…˜ -->
        <section class="results-section">
            <h2>ğŸ’¡ ì‚¬ìš©ë²•</h2>
            <div style="padding: 20px; line-height: 1.6;">
                <p><strong>ë³€ë™ì„± ëŒíŒŒ ì „ëµ:</strong> ë˜ë¦¬ ìœŒë¦¬ì—„ìŠ¤ì˜ ë³€ë™ì„± ëŒíŒŒ ì „ëµì„ ê¸°ë°˜ìœ¼ë¡œ í•©ë‹ˆë‹¤.</p>
                <ul style="margin: 15px 0; padding-left: 20px;">
                    <li><strong>ì§„ì…ê°€:</strong> ì „ì¼ ì¢…ê°€ + (ì „ì¼ ê³ ê°€ - ì „ì¼ ì €ê°€) Ã— 0.6</li>
                    <li><strong>ì†ì ˆê°€:</strong> ì§„ì…ê°€ì˜ -5% (ê¸°ë³¸ê°’)</li>
                    <li><strong>ëª©í‘œê°€:</strong> ë¦¬ìŠ¤í¬ ëŒ€ë¹„ 1.5:1, 2:1 ë¹„ìœ¨</li>
                </ul>
                <p><strong>ë‹¨ì¶•í‚¤:</strong> Ctrl+Enter (ë˜ëŠ” Cmd+Enter)ë¡œ ìŠ¤ìº” ì‹œì‘</p>
                <p><strong>ì•Œë¦¼:</strong> ëŒíŒŒ ì¢…ëª© ë°œê²¬ ì‹œ ë¸Œë¼ìš°ì € ì•Œë¦¼</p>
            </div>
        </section>

        <!-- ì˜¤í”„ë¼ì¸ í‘œì‹œ -->
        <div id="offlineIndicator" class="offline-indicator hidden">
            ğŸ“¡ ì˜¤í”„ë¼ì¸ ëª¨ë“œ - ìºì‹œëœ ë°ì´í„° í‘œì‹œ ì¤‘
        </div>
    </div>

    <!-- Loading overlay (ì´ˆê¸°í™” ì¤‘ í‘œì‹œ) -->
    <div id="loadingOverlay" style="
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: rgba(255, 255, 255, 0.9);
        display: flex;
        justify-content: center;
        align-items: center;
        z-index: 9999;
        backdrop-filter: blur(5px);
    ">
        <div style="text-align: center;">
            <div style="font-size: 3rem; margin-bottom: 1rem;">ğŸ“ˆ</div>
            <div style="font-size: 1.2rem; color: #2563eb;">S&P 500 ìŠ¤ìºë„ˆ ì´ˆê¸°í™” ì¤‘...</div>
        </div>
    </div>

    <!-- ìŠ¤í¬ë¦½íŠ¸ ë¡œë“œ ìˆœì„œ ì¤‘ìš” -->
    <script src="js/storage.js"></script>
    <script src="js/calculator.js"></script>
    <script src="js/notifications.js"></script>
    <script src="js/scanner.js"></script>
    <script src="js/app.js"></script>
    
    <!-- ì´ˆê¸°í™” ì™„ë£Œ í›„ ë¡œë”© ì˜¤ë²„ë ˆì´ ì œê±° -->
    <script>
        // ì´ˆê¸°í™” ì™„ë£Œë¥¼ í™•ì¸í•˜ê³  ë¡œë”© ì˜¤ë²„ë ˆì´ ì œê±°
        const checkInitialization = () => {
            if (window.sp500App && window.sp500App.isReady()) {
                const overlay = document.getElementById('loadingOverlay');
                if (overlay) {
                    overlay.style.opacity = '0';
                    overlay.style.transition = 'opacity 0.5s ease';
                    setTimeout(() => {
                        overlay.remove();
                    }, 500);
                }
            } else {
                setTimeout(checkInitialization, 100);
            }
        };
        
        // DOM ë¡œë“œ í›„ í™•ì¸ ì‹œì‘
        document.addEventListener('DOMContentLoaded', () => {
            setTimeout(checkInitialization, 1000); // 1ì´ˆ í›„ë¶€í„° í™•ì¸
        });
        
        // ìµœëŒ€ 10ì´ˆ í›„ ê°•ì œ ì œê±°
        setTimeout(() => {
            const overlay = document.getElementById('loadingOverlay');
            if (overlay) {
                overlay.remove();
            }
        }, 10000);
    </script>

    <!-- PWA ì„œë¹„ìŠ¤ ì›Œì»¤ ë“±ë¡ -->
    <script>
        // ì„œë¹„ìŠ¤ ì›Œì»¤ ë“±ë¡ (HTTPSì—ì„œë§Œ)
        if ('serviceWorker' in navigator && location.protocol === 'https:') {
            window.addEventListener('load', () => {
                navigator.serviceWorker.register('sw.js')
                    .then(registration => {
                        console.log('SW registered: ', registration);
                    })
                    .catch(registrationError => {
                        console.log('SW registration failed: ', registrationError);
                    });
            });
        }
    </script>

    <!-- Google Analytics (ì„ íƒì‚¬í•­) -->
    <!--
    <script async src="https://www.googletagmanager.com/gtag/js?id=GA_MEASUREMENT_ID"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());
        gtag('config', 'GA_MEASUREMENT_ID');
    </script>
    -->
    
</body>
</html>